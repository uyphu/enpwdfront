<!--
  Generated template for the AddSecret page.
  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>

  <ion-navbar>
    <ion-title>Add Secret</ion-title>
    <ion-buttons end>
		<button (click)="onSubmit()" ion-button [disabled]="!addForm.valid">
			Save
		</button>
	</ion-buttons>

  </ion-navbar>

</ion-header>


<ion-content padding>
	<form [formGroup]="addForm" (ngSubmit)="onSubmit()">
		<ion-list>
			<ion-item >
				<ion-label floating primary>Domain</ion-label>
				<ion-input [(ngModel)]="secret.domain" formControlName="domain" type="text"
                     id="domain" spellcheck="false" autocapitalize="off">
          		</ion-input>
			</ion-item>

			<!-- <ion-item *ngIf="!myForm.controls.domain.valid  && (myForm.controls.domain.dirty || submitAttempt)">
                <p class="invalid">Please enter a valid name.</p>
            </ion-item> -->
			<p *ngIf="!isValid('domain')" danger padding-left class="invalid">Invalid domain</p>
			<ion-item>
	          <ion-label floating primary>Username</ion-label>
	          <ion-input [(ngModel)]="secret.username" formControlName="username" type="text"
                     id="username" spellcheck="false" autocapitalize="off">
          		</ion-input>
	        </ion-item>
	        <p *ngIf="!isValid('username')" danger padding-left class="invalid">Invalid username</p>
	        <ion-item>
	          <ion-label floating primary>Password</ion-label>
	          <ion-input type="password" [(ngModel)]="secret.password" (input)='onInputTime($event.target.value)' formControlName="password"
	                     id="password" spellcheck="false" autocapitalize="off">
	          </ion-input>
	        </ion-item>
	        <p *ngIf="!isValid('password')" danger padding-left class="invalid">Invalid password</p>
	        <ion-item>
	          <ion-label floating primary>Confirm Password</ion-label>
	          <ion-input [(ngModel)]="secret.confirmPassword" formControlName="confirmPassword" type="password"
                     id="confirmPassword" spellcheck="false" autocapitalize="off">
	          </ion-input>
	        </ion-item>
	        <p *ngIf="!isValid('confirmPassword')" danger padding-left class="invalid">Invalid Password</p>    
	        <ion-item>
	          <ion-label floating primary>Note</ion-label>
	          <ion-input type="text" [(ngModel)]="secret.note" formControlName="note"
	                     id="note" spellcheck="false" autocapitalize="off">
	          </ion-input>
	        </ion-item> 
	        <ion-item>
	         <ion-label floating primary>Generate Password</ion-label>
	          <ion-input type="text" [(ngModel)]="secret.encryptedPassword" formControlName="encryptedPassword" disabled="true"
	                      id="encryptedPassword" spellcheck="false" autocapitalize="off">
	          </ion-input>
	        </ion-item>
		</ion-list>
		<div padding>
	      <button type="submit" ion-button color="primary" block [disabled]="!addForm.valid">Save</button>
	    </div>
	</form>
</ion-content>